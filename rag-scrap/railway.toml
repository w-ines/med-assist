[build]
builder = "nixpacks"

[deploy]
healthcheckPath = "/docs"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

[[services]]
name = "rag-backend"

[services.variables]
LLM_PROVIDER = "openrouter"
OPEN_AI_MODEL = "meta-llama/llama-3.1-70b-instruct"
BASE_URL = "https://openrouter.ai/api/v1"
OPEN_ROUTER_KEY = "${OPEN_ROUTER_KEY}"
SUPABASE_URL = "${SUPABASE_URL}"
SUPABASE_KEY = "${SUPABASE_KEY}"
SUPABASE_SERVICE_ROLE_KEY = "${SUPABASE_SERVICE_ROLE_KEY}"
NODE_ENV = "production"
API_URL = "https://your-app.railway.app"
BACKEND_API_URL = "https://your-app.railway.app"
CORS_ORIGINS = "https://your-frontend.railway.app"
LOG_LEVEL = "INFO"
RAG_SUMMARIZE_ON_UPLOAD = "false"
CACHE_ENABLED = "true"
CACHE_TTL_SECONDS = "3600"
CACHE_MAX_SIZE = "1000"
